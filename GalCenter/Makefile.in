#--------------------------------------------------
#--- Makefile for GalCenter
#--- Generated by ../configure
#--------------------------------------------------

#--- Objects to build
OBJS		= galcenter.o Memory2.o  utils.o find_centers.o

PROGS =  galcenter.exe

AR = ar  rcv
RANLIB = ranlib

#--------------------------------------------------
# Compiler settings (configured by ../configure)
#--------------------------------------------------
FC = @FC@
CC = @CC@

OPT = @OPT@  @OPENMP@ -DINDEX -DVarPM   -DXYZDBL  -DQUADHILBERT -DNENER=@NENER@ -DNPRE=@NPRE@ -DREAD_SINK -DNCHEM=@GALCENTER_NCHEM@ -DNDUST=@GALCENTER_NDUST@

DFLAGS = -DNMEG=@GALCENTER_NMEG@L -D_LARGE_FILES

FFLAGS = $(FDFLAGS) $(OPT)  -mcmodel=medium
CFLAGS = $(DFLAGS)  $(OPT)
LDFLAGS = $(OPT) -mcmodel=medium

LIBS = -lm

INCLUDES =

#--- Suffix-based compilation rules
.SUFFIXES: .exe .o .c .f .F

#rules to build binary from source

.c.o :
	$(CC) $(CFLAGS) $(INCLUDES) -c $<

.f.o :
	$(FC) $(FFLAGS) $(INCLUDES) -c $<

.for.o :
	$(FC) $(FFLAGS) $(INCLUDES) -c $<

.F.o :
	$(FC) $(FFLAGS) $(INCLUDES) -c $<

.c.exe :
	$(CC) $(LDFLAGS) $(INCLUDES) -o $*.exe $(OBJS) $(MPI_LINKS) $(LIBS)

.f.exe :
	$(FC) $(LDFLAGS) $(INCLUDES) -o $*.exe $(OBJS) $(MPI_LINKS) $(LIBS) $(INCLUDES)

.for.exe :
	$(FC) $(LDFLAGS) $(INCLUDES) -o $*.exe $(OBJS) $(MPI_LINKS) $(LIBS) $(INCLUDES)

.F.exe :
	$(FC) $(LDFLAGS) $(INCLUDES) -o $*.exe $(OBJS) $(MPI_LINKS) $(LIBS) $(INCLUDES)

#--- Targets
all:
	\rm -f $(PROGS)
	$(MAKE) $(PROGS)
new: clean
	$(MAKE) all
clean:
	rm -f $(OBJS)
	rm -f $(PROGS)
$(PROGS): $(OBJS)
